(this.webpackJsonpjsx=this.webpackJsonpjsx||[]).push([[0],{1116:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(7),o=a.n(s),l=(a(43),a(44),a(45),a(9)),c=a(10),i=a(13),m=a(12),u=a(1),d=a.n(u),p=a(8),f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"bottom-right",n={position:a,autoClose:8e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0};"error"===t?p.b.error(e,n):"info"===t?p.b.info(e,n):"warning"===t?p.b.warning(e,n):"dark"===t?Object(p.b)(e,n):p.b.success(e,n)},g=p.a,v=(a(14),a(64),function(e){return e.children}),b=a(2),h=a(4),E="http://51.11.37.127/api/",N="http://51.11.37.127/",k={username:"",password:""},w={username:"",email:"",first_name:"",last_name:"",password:"",password2:"",is_checked:!1,city:"",address:""},y=a(18),S=a.n(y),O=function(){var e=JSON.parse(localStorage.getItem("user")),t=null===e?new Date:e.expireDate,a=new Date,n=S()(a),r=S()(t);return console.log(r.diff(n)),r.diff(n)<=0},C=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=document.getElementById(e),r=document.getElementById(e+"_feedback");t?(n.classList.remove("is-invalid"),r.classList.add("is-invisible"),r.classList.remove("is-visible")):(n.classList.add("is-invalid"),r.classList.add("is-visible"),r.classList.remove("is-invisible"),""!==a&&(r.innerText=a))},x=a(3),_=a.n(x);d.a.defaults.xsrfCookieName="csrftoken",d.a.defaults.xsrfHeaderName="X-CSRFToken";var j=function(e){var t=_.a.get("csrftoken"),s=!1,o=Object(n.useState)(Object(b.a)({},k)),l=Object(h.a)(o,2),c=l[0],i=l[1],m=Object(n.useState)(!1),u=Object(h.a)(m,2),p=u[0],E=u[1],w=function(e){e.forEach((function(e){""===c[e]?(s=!1,!1||C(e,!1)):(s=!0,C(e,!0))}))};return r.a.createElement(v,null,r.a.createElement(g,null),r.a.createElement("div",{className:"col-md-4 col-sm-8 col-xs-6 mx-auto panel"},r.a.createElement("div",{className:"text-center py-4"},r.a.createElement("button",{onClick:function(){return e.back()},type:"button",className:"btn btn-lg float-left"},r.a.createElement("i",{className:"fas fa-arrow-left"})),r.a.createElement("h3",{className:"form-title font-weight-bold"},"LOGIN")),r.a.createElement("form",{method:"POST",className:"p-1"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},"Username ",r.a.createElement("span",{className:"require"},"*")),r.a.createElement("input",{type:"username",className:"form-control inputBG",id:"username","aria-describedby":"usernameHelp",placeholder:"Username",onChange:function(e){return i(Object(b.a)(Object(b.a)({},c),{},{username:e.target.value}))},required:!0}),r.a.createElement("div",{id:"username_feedback",className:"invalid-feedback is-invisible"},"Please username is required.")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password ",r.a.createElement("span",{className:"require"},"*")),r.a.createElement("input",{type:"password",className:"form-control inputBG",id:"password",placeholder:"Password",onChange:function(e){return i(Object(b.a)(Object(b.a)({},c),{},{password:e.target.value}))},required:!0}),r.a.createElement("div",{id:"password_feedback",className:"invalid-feedback is-invisible"},"Please password is required.")),r.a.createElement("button",{disabled:p,onClick:function(e){return function(e){if(!0,e.persist(),e.preventDefault(),w(["username","password"]),s){E(!0);var n=new(a(16));n.append("username",c.username),n.append("password",c.password);var r={method:"post",url:"http://51.11.37.127/login/",headers:{"X-CSRFToken":t},data:n};d()(r).then((function(e){E(!1),console.log(JSON.stringify(e.data));var t={username:c.username,expireDate:e.data.expiry,token:e.data.token};localStorage.setItem("user",JSON.stringify(t)),window.location.href=N})).catch((function(e){E(!1),!1,f("Unable to log in with provided credentials.","error","top-center")}))}}(e)},className:"btn btn-color btn-block rounded-pill my-4"},p?"Sending...":"LOGIN"," ",p?r.a.createElement("i",{className:"fas fa-spinner fa-spin"}):r.a.createElement("i",{className:"fas fa-sign-in-alt"})),r.a.createElement("div",{className:"mt-3 text-center"},r.a.createElement("p",null,r.a.createElement("a",{href:"#/",className:"link"},"Forget password?"))))))},F=a(6);d.a.defaults.xsrfCookieName="csrftoken",d.a.defaults.xsrfHeaderName="X-CSRFToken";var R=function(e){var t=_.a.get("csrftoken");console.log(t);var s=Object(n.useState)(Object(b.a)({},w)),o=Object(h.a)(s,2),l=o[0],c=o[1],i=Object(n.useState)(!0),m=Object(h.a)(i,2),u=m[0],p=m[1],N=Object(n.useState)(!1),k=Object(h.a)(N,2),y=k[0],S=k[1],O=!1,x=!1,j=function(e){return e.includes("@")&&e.includes(".")},R=function(e){e.forEach((function(e){""===l[e]?(O=!1,!1===!1&&C(e,!1)):(O=!0,C(e,!0))}))},L=function(e){var t=e.password,a=e.password2,n=/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{7,15}$/;return!(!t.match(n)||!a.match(n)||t!==a)},P=function(e,t){var a=t.slice(0,3);return e.includes(a)};return r.a.createElement(v,null,r.a.createElement(g,null),r.a.createElement("div",{className:"col-md-9 col-sm-12 col-xs-12 mx-auto panel"},r.a.createElement("div",{className:"text-center py-3"},r.a.createElement("button",{onClick:function(){return e.back()},type:"button",className:"btn btn-lg float-left"},r.a.createElement("i",{className:"fas fa-arrow-left"})),r.a.createElement("h3",{className:"form-title font-weight-bold"},"Registration")),r.a.createElement("form",{className:"p-2",method:"POST",autoComplete:"off"},r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"first_name"},"First Name ",r.a.createElement("span",{className:"require"},"*")),r.a.createElement("input",{type:"text",className:"form-control inputBG",id:"first_name",placeholder:"First Name",name:"first_name",onChange:function(e){return c(Object(b.a)(Object(b.a)({},l),{},Object(F.a)({},e.target.name,e.target.value)))}}),r.a.createElement("div",{id:"first_name_feedback",className:"invalid-feedback is-invisible"},"Please first name is required.")),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"last_name"},"Last Name ",r.a.createElement("span",{className:"require"},"*")),r.a.createElement("input",{type:"text",className:"form-control inputBG",id:"last_name",placeholder:"Last Name",name:"last_name",onChange:function(e){return c(Object(b.a)(Object(b.a)({},l),{},Object(F.a)({},e.target.name,e.target.value)))}}),r.a.createElement("div",{id:"last_name_feedback",className:"invalid-feedback is-invisible"},"Please last name is required."))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"email"},"Email Address ",r.a.createElement("span",{className:"require"},"*")),r.a.createElement("input",{type:"email",className:"form-control inputBG",id:"email",placeholder:"Email Address",name:"email",onChange:function(e){return c(Object(b.a)(Object(b.a)({},l),{},Object(F.a)({},e.target.name,e.target.value)))}}),r.a.createElement("div",{id:"email_feedback",className:"invalid-feedback is-invisible"},"Please email is required.")),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"username"},"Username ",r.a.createElement("span",{className:"require"},"*")),r.a.createElement("input",{type:"text",className:"form-control inputBG",id:"username",placeholder:"Username",name:"username",onChange:function(e){return c(Object(b.a)(Object(b.a)({},l),{},Object(F.a)({},e.target.name,e.target.value)))}}),r.a.createElement("div",{id:"username_feedback",className:"invalid-feedback is-invisible"},"Please username is required."))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"password"},"Password ",r.a.createElement("span",{className:"require"},"*")),r.a.createElement("input",{type:"password",className:"form-control inputBG",id:"password",placeholder:"Password",name:"password",onChange:function(e){return c(Object(b.a)(Object(b.a)({},l),{},Object(F.a)({},e.target.name,e.target.value)))}}),r.a.createElement("div",{id:"password_feedback",className:"invalid-feedback is-invisible"},"Please password is required.")),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"confirmpassowrd"},"Confirm Password ",r.a.createElement("span",{className:"require"},"*")),r.a.createElement("input",{type:"password",className:"form-control inputBG",id:"password2",placeholder:"Confirm Password",name:"password2",onChange:function(e){return c(Object(b.a)(Object(b.a)({},l),{},Object(F.a)({},e.target.name,e.target.value)))}}),r.a.createElement("div",{id:"password2_feedback",className:"invalid-feedback is-invisible"},"Please confirm password is required."))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"city"},"City"),r.a.createElement("select",{id:"city",className:"form-control inputBG",name:"city",onChange:function(e){return c(Object(b.a)(Object(b.a)({},l),{},Object(F.a)({},e.target.name,e.target.value)))}},r.a.createElement("option",{defaultValue:!0},"Choose..."),r.a.createElement("option",null,"Akosombo"),r.a.createElement("option",null,"Aburi"),r.a.createElement("option",null,"Accra"),r.a.createElement("option",null,"Kumasi"),r.a.createElement("option",null,"Koforidua"),r.a.createElement("option",null,"Tamale"),r.a.createElement("option",null,"Hohoe"))),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"address"},"Address"),r.a.createElement("input",{type:"text",className:"form-control inputBG",id:"address",placeholder:"Address",name:"address",onChange:function(e){return c(Object(b.a)(Object(b.a)({},l),{},Object(F.a)({},e.target.name,e.target.value)))}}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"form-check"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"is_checked",onChange:function(e){return function(e){e.persist(),x=e.target.checked,p(!e.target.checked)}(e)},required:!0}),r.a.createElement("label",{className:"form-check-label",htmlFor:"gridCheck"},"I agree with the terms and conditions"," ",r.a.createElement("span",{className:"require"},"*")))),r.a.createElement("div",{className:"text-center"},r.a.createElement("button",{disabled:u,type:"submit",onClick:function(n){return function(n){if(!0,n.persist(),n.preventDefault(),R(["first_name","last_name","username","email","password","password2"]),j(l.email)){var r=l.password,s=l.password2,o=l.username,c=l.first_name,i=l.last_name,m=l.email;if(!L({password:r,password2:s}))return C("password",!1,"Re-enter password?"),void C("password2",!1,"Both password must match and be at least 7 to 15 characters which contain at one lowercase letter, one uppercase letter, one numeric digit, and one special character (eg @#%, etc)");if(P(r,o))return C("password",!1,"Re-enter password?"),void C("password2",!1,"Password must not contain username!");if(P(r,c))return C("password",!1,"Re-enter password?"),void C("password2",!1,"Password must not contain first name!");if(P(r,i))return C("password",!1,"Re-enter password?"),void C("password2",!1,"Password must not contain last name!");if(P(r,m))return C("password",!1,"Re-enter password?"),void C("password2",!1,"Password must not contain email!");if(x)f("Please accept our terms and conditions before proceeding!","error");else if(O){S(!0);var u=new(a(16));u.append("username",l.username),u.append("password",l.password),u.append("password2",l.password2),u.append("email",l.email),u.append("first_name",l.first_name),u.append("last_name",l.last_name),u.append("city",l.city),u.append("address",l.address);var p={method:"post",url:E+"register/",headers:{"X-CSRFToken":t},data:u};d()(p).then((function(t){S(!1),201===t.status&&e.submitRegister(t.data)})).catch((function(e){console.log(e),S(!1),f("Oops something go wrong! Please check to ensure all required fields are entered","error")}))}}else C("email",!1,"Invaild email! Please enter a valid email.")}(n)},className:"btn btn-color rounded-pill px-5 my-4"},y?"Processing... ":"Create Account ",y?r.a.createElement("i",{className:"fas fa-spinner fa-spin"}):null)))))},L=function(e){return r.a.createElement(v,null,e.isLogin?r.a.createElement(j,{back:e.onBack,islogin:e.isLogin,submitLogin:e.onLogin}):r.a.createElement(R,{back:e.onBack,isregister:e.isRegister,submitRegister:e.onRegister}))},P=a(33),I=a.n(P),T=function(e){return r.a.createElement(v,null,r.a.createElement("footer",{className:"text-muted"},r.a.createElement("div",{className:"container"},r.a.createElement("p",{className:"float-right"},r.a.createElement(I.a,{icon:"fas fa-arrow-up",position:{bottom:"0%",right:"0%"},hover:{backgroundColor:"#fc81a0",opacity:"0.95"},margin:"32px"})),r.a.createElement("p",{className:"text-center text-black"},"\xa9 OctaVents All Reversed Rights."))))},B=Event=function(e){return r.a.createElement(v,null,r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"card mb-4 bg-white shadow-lg rounded-0"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title lead"},null!==e.eventInfo?e.eventInfo.title:""),r.a.createElement("p",{className:"card-text"},r.a.createElement("strong",null,"SPEAKER: ")," ",null!==e.eventInfo?e.eventInfo.speaker:""),r.a.createElement("p",{className:"card-text"},r.a.createElement("strong",null,"LOCATION: ")," ",null!==e.eventInfo?e.eventInfo.location:""),r.a.createElement("p",{className:"card-text"},r.a.createElement("strong",null,"TIME: ")," ",null!==e.eventInfo?e.eventInfo.time:""),r.a.createElement("p",{className:"card-text"},r.a.createElement("strong",null,"ROOM CAPACITY: ")," ",null!==e.eventInfo?e.eventInfo.room_capacity:""),r.a.createElement("p",{className:"card-text"},r.a.createElement("strong",null,"TAG LINE: ")," ",null!==e.eventInfo?e.eventInfo.tagline:""),r.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{type:"button",className:"btn btn-sm btn-color btn-primary","data-toggle":"modal","data-target":"#staticBackdrop",onClick:function(){e.loadInfo(e.eventInfo)}},"Book now")),r.a.createElement("small",{className:"text-muted"},"Room:"," ",parseInt(e.eventInfo.room_capacity)-e.eventInfo.attendees," ","left"))))))};d.a.defaults.xsrfCookieName="csrftoken",d.a.defaults.xsrfHeaderName="X-CSRFToken";var A=function(e){var t=_.a.get("csrftoken"),a=function(t){e.loginNavHandler(t)},n=function(){var a={method:"post",url:"http://51.11.37.127/logout/",headers:{Authorization:"Token "+JSON.parse(localStorage.getItem("user")).token,"X-CSRFToken":t}};d()(a).then((function(t){localStorage.removeItem("user"),e.onlogout(!0),window.location.href=N})).catch((function(t){localStorage.removeItem("user"),e.onlogout(!0),window.location.href=N}))};return r.a.createElement(v,null,r.a.createElement("header",{className:"header fixed-top"},r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark event-color shadow-lg fixed-top"},r.a.createElement("a",{className:"navbar-brand font-weight-bold",href:"#/"},"OctaVents"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},r.a.createElement("ul",{className:"navbar-nav ml-auto"},e.is_auth?r.a.createElement("li",{className:"nav-item dropdown ml-auto"},r.a.createElement("a",{href:"#/",className:"nav-link dropdown-toggle","data-toggle":"dropdown"},null!==e.user?e.user.username:"Welcome"),r.a.createElement("div",{className:"dropdown-menu dropdown-menu-right"},r.a.createElement("a",{href:"#/",className:"dropdown-item",onClick:function(){return e.onpage(!0)}},"Profile"),r.a.createElement("div",{className:"dropdown-divider"}),r.a.createElement("a",{href:"#/",className:"dropdown-item",onClick:n},"Logout"))):r.a.createElement("li",{className:"nav-item",onClick:function(){return a("Login")}},r.a.createElement("button",{className:"btn btn-primary mb-2"},"Login")),e.is_auth?null:r.a.createElement("li",{className:"nav-item"},r.a.createElement("button",{className:"btn btn-outline-info",onClick:function(){return a("Register")}},"Register")))))))};d.a.defaults.xsrfCookieName="csrftoken",d.a.defaults.xsrfHeaderName="X-CSRFToken";var D=function(e){var t=_.a.get("csrftoken"),a=Object(n.useState)(!1),s=Object(h.a)(a,2),o=s[0],l=s[1],c=Object(n.useState)({user_id:null,event_id:null,ticket:0,phone_number:null}),i=Object(h.a)(c,2),m=i[0],u=i[1],p=function(){document.getElementById("phone_number").value="",document.getElementById("ticket").value="",u({user_id:null,event_id:null,ticket:0,phone_number:null})};return r.a.createElement(v,null,r.a.createElement(g,null),r.a.createElement("div",{className:"modal fade",id:"staticBackdrop","data-backdrop":"static","data-keyboard":"false",tabIndex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog modal-dialog-centered"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header text-center"},r.a.createElement("h5",{className:"modal-title",id:"staticBackdropLabel"},null!==e.event?e.event.title:"OctaVents"),r.a.createElement("button",{type:"button",className:"btn btn-color rounded-circle ","data-dismiss":"modal","aria-label":"Close",onClick:p},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body mx-1"},r.a.createElement("form",{className:"p-1"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},"Your Name"),r.a.createElement("input",{type:"text",className:"form-control inputBG",id:"name",readOnly:!0,placeholder:"Your Name",value:null!==e.user?e.user.first_name+" "+e.user.last_name:""})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"E-mail Address"),r.a.createElement("input",{type:"email",className:"form-control inputBG",id:"email",placeholder:"E-mail Address",readOnly:!0,value:null!==e.user?e.user.email:""})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"phonenumber"},"Phone Number"),r.a.createElement("input",{type:"number",className:"form-control inputBG",id:"phone_number",placeholder:"Phone Number e.g. 0567133569",name:"phone_number",onChange:function(t){return u(Object(b.a)(Object(b.a)({},m),{},{phone_number:t.target.value,user_id:e.user.pk,event_id:e.event.id}))}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"ticket"},"Ticket Number"),r.a.createElement("select",{id:"ticket",className:"form-control inputBG",name:"ticket",onChange:function(e){return u(Object(b.a)(Object(b.a)({},m),{},{ticket:e.target.value}))}},r.a.createElement("option",{defaultValue:!0},"Select..."),r.a.createElement("option",null,"1"),r.a.createElement("option",null,"2"),r.a.createElement("option",null,"3"),r.a.createElement("option",null,"4"),r.a.createElement("option",null,"5"),r.a.createElement("option",null,"6"),r.a.createElement("option",null,"7"),r.a.createElement("option",null,"8"),r.a.createElement("option",null,"9"),r.a.createElement("option",null,"10"))),r.a.createElement("button",{type:"button",disabled:!(!o&&e.isAuth),onClick:function(e){return function(e){l(!0),e.persist(),e.preventDefault();var a={method:"post",url:"".concat(E,"event-book/"),headers:{"X-CSRFToken":t},data:m};d()(a).then((function(e){l(!1),700!==e.data.status_code&&670!==e.data.status_code?(f("Booked successfully","success","top-center"),p()):f(e.data.result,"error","top-center")})).catch((function(e){l(!1),console.log(e)}))}(e)},className:"btn btn-color btn-block rounded-pill my-4"},"BOOK ME!")))))))};d.a.defaults.xsrfCookieName="csrftoken",d.a.defaults.xsrfHeaderName="X-CSRFToken";var q=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={events:[],event:null,user:null,show:!1},e.loadEventInfo=function(t){e.setState(Object(b.a)(Object(b.a)({},e.state),{},{event:t}))},e.onShow=function(){e.setState(Object(b.a)(Object(b.a)({},e.state),{},{show:!1}))},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.init()}},{key:"init",value:function(){this.getEvents()}},{key:"getEvents",value:function(){var e=this,t=_.a.get("csrftoken");d.a.get("".concat(E,"events/"),{headers:{"X-CSRFToken":t}}).then((function(t){var a=t.data.map((function(e){return{id:e.id,title:e.title,speaker:e.speaker,location:e.location,date:e.date,time:e.time,room_capacity:e.room_capacity,tagline:e.tagline,attendees:e.attendees.length}}));e.setState({events:a})}))}},{key:"render",value:function(){var e=this,t=this.state.events.map((function(t,a){return r.a.createElement(B,{key:a,eventInfo:t,loadInfo:e.loadEventInfo,info:a})}));return r.a.createElement(v,null,r.a.createElement(A,{onpage:this.props.onpage,loginNavHandler:this.props.loginNavHandler,user:this.props.user,is_auth:this.props.isAuthenticated,onlogout:this.props.islogout}),r.a.createElement("main",{role:"main",className:"pt-5 mt-2"},r.a.createElement("section",{className:"jumbotron text-center"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"display-2"},"Events"),r.a.createElement("p",{className:"lead text-muted"},"Looking for something to do in Accra? Whether you're a local, new in town or just cruising through we've got loads of great tips and events. You can explore by location, what's popular, our top picks, free stuff... you got this. Ready?"))),r.a.createElement("div",{className:"event py-5"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},t)))),r.a.createElement(T,null),r.a.createElement(D,{event:this.state.event,onShow:this.onShow,isAuth:this.props.isAuthenticated,user:this.props.user}))}}]),a}(n.Component);a(66);d.a.defaults.xsrfCookieName="csrftoken",d.a.defaults.xsrfHeaderName="X-CSRFToken";var G=function(e){return r.a.createElement(v,null,r.a.createElement("nav",{className:"navbar navbar-dark sticky-top event-color flex-md-nowrap p-0 shadow"},r.a.createElement("a",{className:"navbar-brand col-md-3 col-lg-2 mr-0 px-3",href:"#/"},"OctaVents"),r.a.createElement("button",{className:"navbar-toggler position-absolute d-md-none collapsed",type:"button","data-toggle":"collapse","data-target":"#sidebarMenu","aria-controls":"sidebarMenu","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("ul",{className:"navbar-nav px-3"},r.a.createElement("li",{className:"nav-item text-nowrap"},r.a.createElement("a",{className:"nav-link",href:"#/",onClick:function(){var t=JSON.parse(localStorage.getItem("user")),a=_.a.get("csrftoken"),n={method:"post",url:"http://51.11.37.127/logout/",headers:{Authorization:"Token "+t.token,"X-CSRFToken":a}};d()(n).then((function(t){localStorage.removeItem("user"),e.onlogout(!0),window.location.href=N})).catch((function(t){localStorage.removeItem("user"),e.onlogout(!0),window.location.href=N}))}},"Sign out")))))},X=function(e){return r.a.createElement(v,null,r.a.createElement("nav",{id:"sidebarMenu",className:"col-md-3 col-lg-2 d-md-block bg-light sidebar collapse"},r.a.createElement("div",{className:"sidebar-sticky pt-3"},r.a.createElement("ul",{className:"nav flex-column"},e.is_superuser?r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"#/",onClick:function(){return e.onSwitch("")}},r.a.createElement("i",{className:"fas fa-columns"})," Dashboard",r.a.createElement("span",{className:"sr-only"},"(current)"))):null,e.is_superuser?r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"#/",onClick:function(){return e.onSwitch("users")}},r.a.createElement("i",{className:"fas fa-users"})," Users")):null,r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"#/",onClick:function(){return e.onSwitch("ebooks")}},r.a.createElement("i",{className:"fas fa-book-open"})," Your Book Events")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"#/",onClick:function(){return e.onSwitch("profile")}},r.a.createElement("i",{className:"fas fa-user"})," Profile"))),r.a.createElement("div",{className:"fixed-bottom"},r.a.createElement("button",{className:"btn btn-color",onClick:function(){return e.onpage(!1)}},"Back to Home")))))},H=a(11),U=a.n(H);d.a.defaults.xsrfCookieName="csrftoken",d.a.defaults.xsrfHeaderName="X-CSRFToken";var M=function(e){var t=null===e.events?[]:e.events,n=r.a.useState(!0),s=Object(h.a)(n,2),o=s[0],l=s[1];r.a.useEffect((function(){var e=setTimeout((function(){l(!1)}),1e3);return function(){return clearTimeout(e)}}),[]);var c=function(e){return r.a.createElement("div",{className:"btn-group",role:"group","aria-label":"Action button group"},r.a.createElement("button",{type:"button",name:"Delete",className:"btn btn-danger btn-sm",onClick:function(){var n=new(a(16));n.append("event_id",e.event.id);var r=_.a.get("csrftoken"),s={method:"delete",url:E+"delete_event/",headers:{"X-CSRFToken":r},data:n};window.confirm("Are you sure to delete this event?")&&d()(s).then((function(a){200===a.status&&(t=t.filter((function(t){return!e.event.includes(t)})))})).catch((function(e){console.log(e)}))}},r.a.createElement("i",{className:"fas fa-trash"})))},i=[{name:"Title",selector:"title",sortable:!0},{name:"Speaker",selector:"speaker",sortable:!0},{name:"Location",selector:"location",sortable:!0},{name:"Date",selector:"date",sortable:!0},{name:"Room",selector:"room_capacity",sortable:!0},{name:"Attendees",selector:"attendees",sortable:!0},{name:"Actions",button:!0,cell:function(t){return r.a.createElement(c,{ondelete:e.onDelete,event:t})}}];return r.a.createElement(v,null,r.a.createElement(U.a,{title:"Event Lists",columns:i,data:t,pagination:!0,progressPending:o}))},J=a(37),V=a.n(J),Y=function(e){return r.a.createElement(v,null,r.a.createElement("div",{className:"card",style:{width:"18rem"}},r.a.createElement("img",{src:V.a.image.avatar(),className:"card-img-top",alt:"Profile"}),r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},"Card title"),r.a.createElement("p",{className:"card-text"},"Some quick example text to build on the card title and make up the bulk of the card's content."),r.a.createElement("a",{href:"#/",className:"btn btn-primary"},"Go somewhere"))))},z=function(e){return r.a.createElement("div",{className:"btn-group",role:"group","aria-label":"Action button group"},r.a.createElement("button",{type:"button",name:"Delete",className:"btn btn-danger btn-sm",onClick:function(){var t=new(a(16));t.append("book_id",e.book.book_id);var n={method:"delete",url:E+"remove_user_book/",data:t};d()(n).then((function(e){console.log(JSON.stringify(e.data))})).catch((function(e){console.log(e)}))}},"Cancel"))},K=function(e){var t=null===e.books?[]:e.books,a=r.a.useState(!0),n=Object(h.a)(a,2),s=n[0],o=n[1];r.a.useEffect((function(){var e=setTimeout((function(){o(!1)}),1e3);return function(){return clearTimeout(e)}}),[]);var l=[{name:"Title",selector:"event_title",sortable:!0},{name:"Speaker",selector:"event_speaker",sortable:!0},{name:"Ticket",selector:"ticket",sortable:!0},{name:"Location",selector:"event_location",sortable:!0},{name:"Tagline",selector:"event_tagline",sortable:!0},{name:"Actions",button:!0,cell:function(e){return r.a.createElement(z,{book:e})}}];return r.a.createElement(v,null,r.a.createElement(U.a,{title:"Booked Event Lists",columns:l,data:t,pagination:!0,progressPending:s}))},W=function(e){var t=null===e.users?[]:e.users,a=r.a.useState(!0),n=Object(h.a)(a,2),s=n[0],o=n[1];r.a.useEffect((function(){var e=setTimeout((function(){o(!1)}),1e3);return function(){return clearTimeout(e)}}),[]);return r.a.createElement(v,null,r.a.createElement(U.a,{title:"User Lists",columns:[{name:"Username",selector:"username",sortable:!0},{name:"Name",selector:"name",sortable:!0},{name:"email",selector:"email",sortable:!0},{name:"Address",selector:"address",sortable:!0}],data:t,pagination:!0,progressPending:s}))};d.a.defaults.xsrfCookieName="csrftoken",d.a.defaults.xsrfHeaderName="X-CSRFToken";var Z=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={events:[],users:null,event:null,eventbooks:null,selectPage:""},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.init()}},{key:"init",value:function(){this.getEvents(),this.getBooks(),this.getUsers()}},{key:"getBooks",value:function(){var e=this,t=_.a.get("csrftoken");this.props.user.is_superuser&&d.a.get("".concat(E,"event-book/").concat(this.props.user.pk,"/"),{headers:{"X-CSRFToken":t}}).then((function(t){console.log(t.data),e.setState({eventbooks:t.data})}))}},{key:"getEvents",value:function(){var e=this,t=_.a.get("csrftoken");d.a.get("".concat(E,"events/"),{headers:{"X-CSRFToken":t}}).then((function(t){var a=t.data.map((function(e){return{id:e.id,title:e.title,speaker:e.speaker,location:e.location,date:e.date,time:e.time,room_capacity:e.room_capacity,tagline:e.tagline,attendees:e.attendees.length}}));e.setState({events:a})}))}},{key:"getUsers",value:function(){var e=this,t=_.a.get("csrftoken");d.a.get("".concat(E,"users/"),{headers:{"X-CSRFToken":t}}).then((function(t){e.setState({users:t.data})}))}},{key:"onSwitchPage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.setState({selectPage:e})}},{key:"onDeleteEvent",value:function(e){e.is_success&&this.getEvents()}},{key:"onCancelBook",value:function(e){e.is_success&&this.getBooks()}},{key:"render",value:function(){return r.a.createElement(v,null,r.a.createElement(G,{onlogout:this.props.islogout}),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement(X,{onpage:this.props.onpage,onSwitch:this.onSwitchPage.bind(this),is_superuser:this.props.user.is_superuser}),r.a.createElement("main",{role:"main",className:"col-md-9 ml-sm-auto col-lg-10 px-md-4"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3"})),r.a.createElement("div",{className:"my-3 p-2 shadow",style:{background:"white",borderTop:"5px solid #4B0314"}},""===this.state.selectPage?r.a.createElement(M,{onDelete:this.onDeleteEvent,events:this.state.events}):null,"ebooks"===this.state.selectPage?r.a.createElement(K,{onCancel:this.onCancelBook,books:this.state.eventbooks}):null,"users"===this.state.selectPage?r.a.createElement(W,{users:this.state.users}):null,"profile"===this.state.selectPage?r.a.createElement(Y,null):null)))))}}]),a}(n.Component);d.a.defaults.xsrfCookieName="csrftoken",d.a.defaults.xsrfHeaderName="X-CSRFToken";var $=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={isLoginForm:!1,isRegisterForm:!1,isAuthenticated:!1,user:null,isDashboard:!1},e.setSwitchForm=function(t){e.setState({isLoginForm:t})},e.onSubmitLogin=function(t){t&&(e.setState({isAuthenticated:!0,isLoginForm:!t,isRegisterForm:!t}),e.getUser())},e.onLoginPageHandler=function(t){"login"===t.toLowerCase()?e.setState({isLoginForm:!0,isRegisterForm:!0}):"register"===t.toLowerCase()?e.setState({isRegisterForm:!0}):e.setState({isLoginForm:!1,isRegisterForm:!1})},e.onLogout=function(t){t?(e.setState({isAuthenticated:!1,isDashboard:!1}),e.setState({user:null})):f("Ooop!, Look like you can't log out.","info")},e.onNavBack=function(){e.setState({isLoginForm:!1,isRegisterForm:!1,isDashboard:!1})},e.onSubmitRegister=function(t){t.is_success&&(f("Registered successfully! Confirm email link has been sent so please check your inbox or spam.","success"),e.setState({isLoginForm:t.is_success}))},e.onPageChange=function(t){t?(console.log("Dashboard"),e.setState({isDashboard:!0})):(console.log("Event page"),e.setState({isDashboard:!1}))},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.init(),this.getUser()}},{key:"init",value:function(){O()?(localStorage.removeItem("user"),this.setState({isAuthenticated:!1})):this.setState({isAuthenticated:!0})}},{key:"getUser",value:function(){var e=this,t=_.a.get("csrftoken"),a=JSON.parse(localStorage.getItem("user"));null!==a&&d.a.get("".concat(E,"user/").concat(a.username,"/"),{headers:{"X-CSRFToken":t}}).then((function(t){e.setState({user:t.data})}))}},{key:"render",value:function(){var e=this,t=r.a.createElement("div",{className:this.state.isLoginForm?"container mtop mb-3":"container mt-3 mb-3"},r.a.createElement("div",{className:"row mx-1"},r.a.createElement("div",{className:"col-md-9 col-sm-12 col-xs-12 mx-auto text-center py-3"},r.a.createElement("div",{className:"btn-group",role:"group","aria-label":"Switch button form"},r.a.createElement("button",{className:"btn btn-primary",onClick:function(){return e.setSwitchForm(!0)}},"LOGIN"),r.a.createElement("button",{className:"btn btn-danger",onClick:function(){return e.setSwitchForm(!1)}},"REGISTER"))),r.a.createElement(L,{onLogin:this.onSubmitLogin,onRegister:this.onSubmitRegister,onBack:this.onNavBack,isLogin:this.state.isLoginForm,isRegister:this.state.isRegisterForm})));return r.a.createElement(v,null,r.a.createElement(g,null),this.state.isDashboard?r.a.createElement(Z,{user:this.state.user,onpage:this.onPageChange,islogout:this.onLogout}):this.state.isLoginForm||this.state.isRegisterForm?t:r.a.createElement(q,{onpage:this.onPageChange,loginNavHandler:this.onLoginPageHandler,user:this.state.user,isAuthenticated:this.state.isAuthenticated,islogout:this.onLogout}))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement($,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},38:function(e,t,a){e.exports=a(1116)},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},64:function(e,t,a){},66:function(e,t,a){}},[[38,1,2]]]);
//# sourceMappingURL=main.2418e19f.chunk.js.map